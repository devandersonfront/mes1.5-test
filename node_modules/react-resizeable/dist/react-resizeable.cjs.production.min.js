"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=require("styled-components"),r=(e=n)&&"object"==typeof e&&"default"in e?e.default:e;function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){return t||(t=e.slice(0)),e.raw=t,e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e=o(["\n  min-height: ",";\n  height: ",";\n  overflow: scroll;\n  width: ",";\n  min-width: ",";\n  flex-grow: 1;\n\n  ","\n"]);return a=function(){return e},e}function l(){var e=o(["\n        ",";\n        height: auto;\n      "]);return l=function(){return e},e}function c(){var e=o(["\n  resize: ",";\n  overflow: 'auto';\n"]);return c=function(){return e},e}function f(){var e=o(["\n  position: relative;\n  display: flex;\n  flex-direction: ",";\n  height: ",";\n  flex-wrap: initial;\n"]);return f=function(){return e},e}var s=r.div(f(),(function(e){return e.flexDirection}),(function(e){var t=e.height;return null!=t?t:"auto"})),d=function(e){return n.css(c(),e)},h=function(e){var t=e.resizeDir;if(e.resizeable||t)return"both"===t||"vertical"===t?n.css(l(),d(t)):d(t)},v=r.div(a(),(function(e){var t=e.minHeight;return null!=t?t:"auto"}),(function(e){var t=e.height;return null!=t?t:"100%"}),(function(e){return e.width}),(function(e){var t=e.minWidth;return null!=t?t:"min-content"}),h);exports.Child=t.forwardRef((function(e,n){var r=e.children,i=e.resize,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(e,["children","resize"]);return t.createElement(v,Object.assign({ref:n},i,o),r)})),exports.Resizeable=function(e){var n=e.children,r=e.as,o=void 0===r?"div":r,a=e.flexDirection,l=void 0===a?"row":a,c=e.height,f=void 0===c?"100%":c,d=t.useState(Math.random().toString(20).substr(2,20))[0],h=t.useRef(null),v=t.useRef(0),p=t.useRef(0),m=t.useRef(0),y=t.useRef(0);t.useEffect((function(){if(h.current){var e,t,n,r=[],o={resizeTotalWidths:0,nonResizeTotalWidths:0};Array.from(h.current.children).map((function(e){var t=Number(getComputedStyle(e).getPropertyValue("min-width").replace("px",""));r=[].concat(r,[t]),o="none"===getComputedStyle(e).getPropertyValue("resize")?i({},o,{nonResizeTotalWidths:o.nonResizeTotalWidths+t}):i({},o,{resizeTotalWidths:o.resizeTotalWidths+t})})),v.current=Math.min.apply(Math,r),m.current=r.reduce((function(e,t){return t+e}),0),p.current=Math.ceil(Math.sqrt((e=r,t=Math.floor(e.length/2),n=[].concat(e).sort((function(e,t){return e-t})),e.length%2!=0?n[t]:(n[t-1]+n[t])/2))),y.current=Math.abs(o.resizeTotalWidths-o.nonResizeTotalWidths)}}),[h]);var g=t.useCallback((function(e){var t=(void 0===e?{}:e).totalMin;h.current&&((null!=t?t:m.current)>=window.innerWidth?(h.current.style.flexWrap="wrap",h.current.style.height="auto"):(h.current.style.flexWrap="",h.current.style.height=f))}),[h,m.current]);return t.useEffect((function(){var e,r=null===(e=t.Children.map(n,(function(e,n){var r,i;return t.isValidElement(e)?(null===(r=e.props)||void 0===r||null===(i=r.resize)||void 0===i?void 0:i.resizeable)?document.getElementById("resizeable-"+d+"-"+n):null:e})))||void 0===e?void 0:e.filter((function(e){return Boolean(e)})),i={attributes:!0,attributeFilter:["style"],attributeOldValue:!0},o=new MutationObserver((function(e){window.requestAnimationFrame((function(){if(Array.isArray(e)&&e.length)for(var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,void 0):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(e);!(t=n()).done;){var r=t.value;if("attributes"!==r.type)return;if(r.target instanceof HTMLElement){var i=m.current-v.current+r.target.offsetWidth+p.current+y.current;i>=window.innerWidth&&g({totalMin:i})}}}))}));return null==r||r.forEach((function(e){e instanceof HTMLElement&&o.observe(e,i)})),function(){o.disconnect()}}),[]),t.useEffect((function(){g()}),[g]),t.useEffect((function(){var e,t;return window.addEventListener("resize",(e=g,t=null,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null!==t&&(clearTimeout(t),t=null),t=setTimeout((function(){return e.apply(void 0,r)}),200)})),function(){window.removeEventListener("resize",g)}}),[g]),t.createElement(s,{as:o,ref:h,flexDirection:l,height:f},t.Children.map(n,(function(e,n){return t.isValidElement(e)?t.cloneElement(e,i({},e.props,{id:"resizeable-"+d+"-"+n})):e})))};
//# sourceMappingURL=react-resizeable.cjs.production.min.js.map
